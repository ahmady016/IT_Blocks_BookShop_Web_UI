<h2>Purchase</h2>

<form class="w-50 mx-auto" [formGroup]="purchaseForm" (submit)="$event.preventDefault();">

  <div class="form-group">
    <div class="input-group">
      <input class="form-control" name="purchaseDate" placeholder="Purchase Date"
            [(ngModel)]="purchaseDate" [ngModelOptions]="{standalone: true}"
            ngbDatepicker #purchaseDatePicker="ngbDatepicker" [firstDayOfWeek]="6"
            (blur)="fields.purchaseDate.markAsTouched()"
            (change)="setPurchaseDate()"
            (dateSelect)="setPurchaseDate()">
      <div class="input-group-append">
        <button type="button" class="btn btn-outline-secondary" (click)="purchaseDatePicker.toggle()">
          <i class="far fa-calendar-alt"></i>
        </button>
      </div>
    </div>
    <div class="alert bg-danger" *ngIf="fields.purchaseDate.invalid && fields.purchaseDate.touched">
      <div *ngIf="fields.purchaseDate.errors.required">PurchaseDate Required</div>
    </div>
  </div>

  <div class="form-group">
    <label for="quantity">Quantity</label>
    <input type="number" id="quantity" class="form-control" placeholder="Quantity" formControlName="quantity">
    <div class="alert bg-danger" *ngIf="fields.quantity.invalid && fields.quantity.touched">
      <div *ngIf="fields.quantity.errors.required">Quantity Required</div>
    </div>
  </div>

  <div class="form-group">
    <label for="paidAmount">Paid Amount</label>
    <input type="text" id="paidAmount" class="form-control" placeholder="Paid Amount" formControlName="paidAmount">
    <div class="alert bg-danger" *ngIf="fields.paidAmount.invalid && fields.paidAmount.touched">
      <div *ngIf="fields.paidAmount.errors.required">Paid Amount Required</div>
    </div>
  </div>

  <div class="form-group">
    <label for="CustomerId">CustomerId</label>
    <input type="text" id="customerId" class="form-control" placeholder="CustomerId" formControlName="customerId">
    <div class="alert bg-danger" *ngIf="fields.customerId.invalid && fields.customerId.touched">
      <div *ngIf="fields.customerId.errors.required">CustomerId Required</div>
    </div>
  </div>

  <div class="form-group">
    <label for="customerName">Customer Name</label>
    <input type="text" id="customerName" class="form-control" placeholder="Customer Name" formControlName="customerName">
    <div class="alert bg-danger" *ngIf="fields.customerName.invalid && fields.customerName.touched">
      <div *ngIf="fields.customerName.errors.required">Customer Name Required</div>
    </div>
  </div>

  <div class="flex-around">
    <button
      type="submit"
      class="btn btn-warning btn-lg flex-b-40"
      [disabled]="purchaseForm.invalid"
      (click)="doPurchase()">
      Purchase
    </button>
    <button
      type="button"
      class="btn btn-danger btn-lg flex-b-40"
      (click)="cancel()">
      Cancel
    </button>
  </div>

</form>
